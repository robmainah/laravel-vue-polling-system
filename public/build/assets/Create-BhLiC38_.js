import{d as k,l as p,q as $,g as s,a as _,u as C,w as m,F as c,p as f,o,Z as V,b as e,t as d,f as j,s as h,O as B,j as F,G as M}from"./app-PbwL71_3.js";import{_ as N}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-D9GsOmAc.js";import"./ApplicationLogo-BWCnsUYg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},q={class:"w-full p-4"},z={class:"dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg py-6 px-4"},D={key:0},O=e("p",{class:"flex justify-center text-red-500"},"Please first create questions and choices",-1),Q=[O],U={class:"grid"},E={for:"content",class:"mb-2 text-white/80 capitalize"},G=["id","onUpdate:modelValue","value"],L=["id"],P=e("div",{class:"flex mt-6"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-blue-500 opacity-80 hover:opacity-100 text-white disabled:cursor-not-allowed disabled:bg-success disabled:opacity-50"}," Create ")],-1),I=k({__name:"Create",props:{poll:{}},setup(v){const u=v,i=p([]),n=p({}),b=()=>{const a=i.value.reduce((r,t)=>(r[`question_${t.id}`]="",r),{});n.value=a},x=async()=>{const{data:a}=await f.get(`/polls/${u.poll.id}/votes/create`);i.value=a,b()},y=async()=>{(await f.post(`/polls/${u.poll.id}/votes`,n.value)).status===201&&B.get("/polls")};return $(async()=>{await x()}),(a,r)=>(o(),s(c,null,[_(C(V),{title:"Create New Question"}),_(N,null,{header:m(()=>[e("h2",S,d(a.poll.title)+"'s vote",1)]),default:m(()=>[e("div",q,[e("div",z,[i.value.length?(o(),s("form",{key:1,onSubmit:j(y,["prevent"])},[e("div",U,[(o(!0),s(c,null,h(i.value,(t,g)=>(o(),s("div",{key:t.id,class:"flex flex-col mb-8"},[e("label",E,d(g+1)+") "+d(t.content),1),(o(!0),s(c,null,h(t.choices,l=>(o(),s("div",{key:l.id,class:"flex flex-row gap-2 ms-6"},[F(e("input",{id:"content_"+l.id,type:"radio","onUpdate:modelValue":w=>n.value[`question_${t.id}`]=w,value:l.id,class:"bg-white/80 cursor-pointer"},null,8,G),[[M,n.value[`question_${t.id}`]]]),e("label",{id:"content_"+l.id,class:"mb-2 text-white/80 -mt-1 capitalize"},d(l.content),9,L)]))),128))]))),128)),P])],32)):(o(),s("div",D,Q))])])]),_:1})],64))}});export{I as default};
